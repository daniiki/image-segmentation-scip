<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Fortgeschrittenenpraktikum: Image segmentation using SCIP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fortgeschrittenenpraktikum
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classImage.html" title="Class representing png image. ">Image</a> segmentation using SCIP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> <style>div.image img{width:300px;}</style> This advanced practical dealt with image segmentation. We used a mixed-interger programming framework called <a href="http://scip.zib.de/">SCIP</a>. To read more about the classes and functions defined by SCIP, please refer to its <a href="http://scip.zib.de/doc/html/">documentation</a>.</p>
<p>In our problem, we get an input image. </p><div class="image">
<img src="input.png" alt="input.png"/>
<div class="caption">
Input image</div></div>
<p>The pixels in the input image are clustered in so-called superpixels. This reduces the number of variables and thereby makes the problem easier to solve. The color of a superpixel is defined as the average color of its pixels. </p><div class="image">
<img src="superpixels.png" alt="superpixels.png"/>
<div class="caption">
Superpixels</div></div>
<p>Finally, we get so-called master nodes as input. These are special superpixels, in that every segment contains exactly one of them. They are marked by \(t_1,\dots,t_5\) in the following image. Given this input, we want to cover the image with disjoint segments. The superpixels in each segment should be similar in color. They are marked by thick black lines in the image. </p><div class="image">
<img src="segments.png" alt="segments.png"/>
<div class="caption">
Master nodes and segments</div></div>
<p> Mathematically, the input is the following:</p><ul>
<li>\(\mathcal{S}\): set of superpixels</li>
<li>\(T\subseteq\mathcal{S}\): set of master nodes</li>
<li>\(\mathcal{P}\subset2^\mathcal{S}\): set of connected segments, which each contain extactly one master node</li>
<li>\(y_s\geq0\): color of superpixel \(s\in\mathcal{S}\)</li>
<li>\(k=|T|\): number of segments to cover the image with</li>
<li>\(r_P=\sum_{s\in P}|y_t-y_s|\): error of segment \(P\in\mathcal{P}\), where $t T$ is the single master node for which \(t\in P\)</li>
</ul>
<p>The master problem is </p><p class="formulaDsp">
\begin{align} &amp;\min\quad \sum_{P\in\mathcal{P}} r_P\cdot x_P\\ &amp;\text{s.t.}\quad \sum_{\{P\in\mathcal{P}:s\in P\}} x_P = 1 \quad\forall s\in\mathcal{S} \\ &amp;\phantom{\text{s.t.}\quad} \sum_{P\in\mathcal{P}} x_P = k \\ &amp;\phantom{\text{s.t.}\quad} x_P \in \{0,1\} \quad\forall P\in\mathcal{P} \end{align}
</p>
<p> It is implemented in <a class="el" href="main_8cpp.html">main.cpp</a>.</p>
<p>Since there are exponentially many segments, we use column generation. Therefore, we need the dual problem, which has variables</p><ul>
<li>\(\mu_s\) for all \(s\in\mathcal{S}\): corresponding to the first constraint</li>
<li>\(\lambda\): corresponding to second one The dual problem reads <p class="formulaDsp">
\begin{align} &amp;\max\quad \sum_{s\in\mathcal{S}} \mu_s + k\cdot\lambda \\ &amp;\text{s.t.}\quad \sum_{s\in P} \mu_s + \lambda \leq r_P \quad\forall P\in\mathcal{P} \\ &amp;\phantom{\text{s.t.}\quad} \mu_s \text{ free} \quad\forall s\in\mathcal{S} \\ &amp;\phantom{\text{s.t.}\quad} \lambda \text{ free} \end{align}
</p>
</li>
</ul>
<p>There is one pricing problem per master node \(t\). It has a binary variable \(x_s\) for every \(s\in\mathcal{S}\) and reads </p><p class="formulaDsp">
\begin{align} &amp;\min\quad \underbrace{\sum_{s\in\mathcal{S}} x_s\cdot|y_t-y_s|}_{=r_{\{s\in\mathcal{S}\ :\ x_s=1\}}} - \sum_{s\in\mathcal{S}} x_s\cdot\mu_s \\ &amp;\text{s.t.}\quad \text{connectivity constraint} \\ &amp;\phantom{\text{s.t.}\quad} x_t = 1 \\ &amp;\phantom{\text{s.t.}\quad} x_{t&#39;} = 0 \quad\forall t&#39;\in T\setminus\{t\} \\ &amp;\phantom{\text{s.t.}\quad} x_s \in\{0,1\} \quad\forall s\in\mathcal{S} \end{align}
</p>
<p> The pricing problem, including a simple heuristic, is implemented in the class <a class="el" href="classSegmentPricer.html" title="Class representing pricing problem After each iteration of the master problem, the scip_redcost metho...">SegmentPricer</a>.</p>
<p>To ensure connectivity of the new segment, we use a cutting planes approach. We look at the subgraph with vertices \(\{s\in\mathcal{S}:x_s=1\}\). If a component \(C\) is not connected to \(t\), we add a cut for each \(s\in C\): </p><p class="formulaDsp">
\[\sum_{s&#39;\in\delta(C)}x_{s&#39;} \geq x_s\]
</p>
<p> You can read more about this in the documentation for <a class="el" href="classConnectivityCons.html" title="Class for representing connectivity constraints This class uses cutting planes to make disconnected s...">ConnectivityCons</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
